% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/gen_data.R
\name{gen_data}
\alias{gen_data}
\title{Simulate Longitudinal Ordinal Data Under a Proportional Odds Model}
\usage{
gen_data(
  N,
  baseprobs,
  covs_effects,
  time_effects = NULL,
  trt_ratio = 1,
  time_trt_effects = NULL,
  visits,
  corMatrix,
  extractTime = FALSE,
  covariate_def = NULL,
  dropZ = TRUE
)
}
\arguments{
\item{N}{Integer. Number of subjects to simulate.}

\item{baseprobs}{Numeric vector of baseline category probabilities when all covariates are set to zero/reference level (e.g., \code{c(0.2, 0.5, 0.3)}). Must sum to 1.}

\item{covs_effects}{Named numeric vector specifying the baseline covariate effects on the ordinal outcome
(e.g., \code{c(age = 0.1, pre_diarrhea = -0.3)}). Names must match variables defined in \code{covariate_def}.}

\item{time_effects}{Optional numeric vector giving log-odds shifts across follow-up visits
(length = number of visits - 1). Defaults to 0 if not specified.}

\item{trt_ratio}{Numeric. Treatment-to-control randomization ratio (default = 1, i.e., 1:1 randomization).}

\item{time_trt_effects}{Optional numeric vector giving additional time-varying treatment effects
(length = number of visits - 1). Defaults to 0 if not specified.}

\item{visits}{Character vector of visit/measurement names (e.g., \code{c("visit0", "visit1", "visit2")}).
The first element corresponds to the baseline visit. The remaining corresponds to follow-up visits}

\item{corMatrix}{Numeric correlation matrix specifying within-subject correlation across visits.
Must be symmetric and have dimensions equal to \code{length(visits)}. Users can use the \code{gen_corMatrix()}
function from this package to prepare it.}

\item{extractTime}{Logical (default = \code{FALSE}). If \code{TRUE}, extracts a numeric time variable
from visit names (e.g., "visit3" to 3) in the long-format output.}

\item{covariate_def}{Optional \pkg{simstudy} definition object created by \code{simstudy::defData()}.
If omitted, the function uses built-in default covariates:
a normally distributed \code{age} (mean 60, SD 10) and a binary \code{pre_diarrhea} (probability 0.4).}

\item{dropZ}{Logical (default = \code{TRUE}). z is the variable recording the amount of shift on the log odds scale compared to baseprobs.
If FALSE, it will be included in the output data.frame}
}
\value{
A list with the following components:
\describe{
  \item{\code{wide_format}}{A data.frame in wide format, with one row per subject and one column per visit.}
  \item{\code{long_format}}{A data.frame in long format, with one row per subject-visit combination.}
  }
}
\description{
This function generates correlated ordinal outcome data over multiple visits,
based on a proportional odds model with covariates effects, time effects, and
time-by-treatment interaction effects. It uses the \pkg{simstudy} framework to define covariate
distributions and simulate correlated ordinal responses.
}
\examples{
set.seet(123)
def <- simstudy::defData(varname = "sex", dist = "binary", formula = 0.5)
def <- simstudy::defData(def, varname = "age50", dist = "normal", formula = 0, variance = 100)
baseprobs <- c(0.3,0.4,0.3)
corMat <- generate_corMatrix(n_visits = 4,rho=0.6,corstr = "cs")
dat <- gen_data(
 N = 200,
 baseprobs = baseprobs,
 covs_effects = c(sex = 0.5, age50 = -0.02),
 time_effects = c(0.1, 0.3, 0.5),
 trt_ratio = 1,
 time_trt_effects = c(0.05, 0.1, 0.15),
 visits = paste0("v", 1:4),
 corMatrix = corMat,
 covariate_def = def
)

}
