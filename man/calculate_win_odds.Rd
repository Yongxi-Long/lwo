% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calculate_win_odds.R
\name{calculate_win_odds}
\alias{calculate_win_odds}
\title{Calculate Marginal True Win Odds by Visit}
\usage{
calculate_win_odds(
  N_approx = 10000,
  baseprobs,
  covs_effects,
  time_effects = NULL,
  trt_ratio,
  time_trt_effects = NULL,
  visits,
  corMatrix,
  covariate_def = NULL
)
}
\arguments{
\item{N_approx}{Integer. Approximate number of subjects to simulate for estimating covariate distribution (default = 1e4).}

\item{baseprobs}{Numeric vector of baseline category probabilities when all covariates are set to zero/reference level (e.g., \code{c(0.2, 0.5, 0.3)}). Must sum to 1.}

\item{covs_effects}{Named numeric vector specifying the baseline covariate effects on the ordinal outcome
(e.g., \code{c(age = 0.1, pre_diarrhea = -0.3)}). Names must match variables defined in \code{covariate_def}.}

\item{time_effects}{Optional numeric vector giving log-odds shifts across follow-up visits
(length = number of visits - 1). Defaults to 0 if not specified.}

\item{trt_ratio}{Numeric. Treatment-to-control randomization ratio (default = 1, i.e., 1:1 randomization).}

\item{time_trt_effects}{Optional numeric vector giving additional time-varying treatment effects
(length = number of visits - 1). Defaults to 0 if not specified.}

\item{visits}{Character vector of visit/measurement names (e.g., \code{c("visit0", "visit1", "visit2")}).
The first element corresponds to the baseline visit. The remaining corresponds to follow-up visits}

\item{corMatrix}{Numeric correlation matrix specifying within-subject correlation across visits.
Must be symmetric and have dimensions equal to \code{length(visits)}. Users can use the \code{gen_corMatrix()}
function from this package to prepare it.}

\item{covariate_def}{Optional \pkg{simstudy} definition object created by \code{simstudy::defData()}.
If omitted, the function uses built-in default covariates:
a normally distributed \code{age} (mean 60, SD 10) and a binary \code{pre_diarrhea} (probability 0.4).}
}
\value{
Numeric vector of marginal win odds at each visit.
}
\description{
Use simulation to compute the true (population-level) win odds at each visit
marginalized with respect to the covariate distribution
}
\examples{
corMatrix <- gen_corMatrix(n_visits = 3,rho=0.6,corstr = "ar1")
estimands <- calculate_win_odds(N_approx = 1e4,
                               baseprobs = rev(c(0.06,0.11,0.12,0.50,0.21)),
                               covs_effects = c("age"=-0.005,"pre_diarrhea"= 0.23),
                               time_effects = c(0,0),
                               trt_ratio = 1,
                               time_trt_effects = c(1,1),
                               visits = visits <- c("week0","week4","week8"),
                               corMatrix = corMatrix)

}
